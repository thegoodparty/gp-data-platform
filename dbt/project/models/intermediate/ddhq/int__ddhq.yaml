version: 2

models:
  - name: int__ddhq_election_results_clean
    description: Intermediate model that pulls selected properties from DDHQ election results
    columns:
      - name: race_id
        description: Race ID
        tests:
          - not_null
      - name: candidate_id
        description: Candidate ID
        tests:
          - not_null
      - name: extracted_state
        description: Extracted state from race name
        tests:
          - accepted_values:
              arguments:
                values: [
                  "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA",
                  "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD",
                  "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ",
                  "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC",
                  "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY",
                  "DC", "US",
                ]

  - name: int__ddhq_election_results_embeddings
    description: Intermediate model that creates embeddings for the election results
    config:
      dbt_environment: "{{ env_var('DBT_ENVIRONMENT') }}"
      gemini_api_key: "{{ env_var('DBT_GEMINI_API_KEY') }}"

  - name: int__general_candidacy_embeddings_for_ddhq
    description: Intermediate model that creates embeddings for the general candidacy data
    config:
      dbt_environment: "{{ env_var('DBT_ENVIRONMENT') }}"
      gemini_api_key: "{{ env_var('DBT_GEMINI_API_KEY') }}"
